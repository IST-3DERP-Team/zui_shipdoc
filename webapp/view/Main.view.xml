<mvc:View controllerName="zuishipdoc.controller.Main"
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns:core="sap.ui.core"
    xmlns:uiL="sap.ui.layout" 
    xmlns:uiT="sap.ui.table"
    xmlns:plugins="sap.ui.table.plugins"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:semantic="sap.m.semantic"
    xmlns:smartfilterbar="sap.ui.comp.smartfilterbar"
    xmlns:fb="sap.ui.comp.filterbar" 
    xmlns:smartMultiInput="sap.ui.comp.smartmultiinput"
    displayBlock="true"> 
    <Page id="page" title="{i18n>title}" showHeader="false">
        <dependents>
            <core:CommandExecution id="CE_NEW" command="New" enabled="true" execute=".createData" />
            <core:CommandExecution id="CE_EDIT" command="Edit" enabled="true" execute=".editData" />
            <core:CommandExecution id="CE_REFRESH" command="Refresh" enabled="true" execute=".refreshData" />
        </dependents>    
        <content> 
            <VBox fitContainer="true">
                <smartfilterbar:SmartFilterBar id="smartFilterBar" entitySet="ZVB_3DERP_SHIPDOC_FILTERS" search="onSearch" persistencyKey="3DERP_pKey" showClearButton="true" showClearOnFB="true">
                    <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="SBU" label="{ddtext>/SBU}" groupId="_BASIC" mandatory="mandatory" width="50px">
                            <smartfilterbar:customControl>
                                <ComboBox id="cboxSBU"
                                    selectedKey="{ui>/sbu}"
                                    change="onSBUChange"
                                    items="{
                                        path: '/ZVB_3DERP_SBU_SH'
                                    }">
                                    <core:Item key="{SBU}" text="{SBU}" />
                                </ComboBox>                                  
                            </smartfilterbar:customControl>
                        </smartfilterbar:ControlConfiguration>
                    </smartfilterbar:controlConfiguration>

                    <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="ISSPLNT" label="{ddtext>/ISSPLNT}" groupId="_BASIC" preventInitialDataFetchInValueHelpDialog="false" />
                    </smartfilterbar:controlConfiguration>
                    <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="SOLDTOCUST" label="{ddtext>/SOLDTOCUST}" groupId="_BASIC" preventInitialDataFetchInValueHelpDialog="false" />
                    </smartfilterbar:controlConfiguration>
                    <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="EVERS" label="{ddtext>/EVERS}" groupId="_BASIC" preventInitialDataFetchInValueHelpDialog="false" />
                    </smartfilterbar:controlConfiguration>
                    <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="DEST" label="{ddtext>/DEST}" groupId="_BASIC" preventInitialDataFetchInValueHelpDialog="false" />
                    </smartfilterbar:controlConfiguration>
                    <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="DLVNO" label="{ddtext>/DLVNO}" groupId="_BASIC" preventInitialDataFetchInValueHelpDialog="false" />
                    </smartfilterbar:controlConfiguration>
                    <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="IONO" label="{ddtext>/IONO}" groupId="_BASIC" preventInitialDataFetchInValueHelpDialog="false" />
                    </smartfilterbar:controlConfiguration>
                    <smartfilterbar:controlConfiguration>
                        <smartfilterbar:ControlConfiguration key="CPONO" label="{ddtext>/CPONO}" groupId="_BASIC" preventInitialDataFetchInValueHelpDialog="false" width="15rem" />
                    </smartfilterbar:controlConfiguration>

                    <smartfilterbar:layoutData>
                        <FlexItemData growFactor="0.1"/>
                    </smartfilterbar:layoutData>
                </smartfilterbar:SmartFilterBar>

                    <uiL:Splitter id="splitter" orientation="Vertical">
                        <Panel id="panelHdr" width="100%" height="100%" class="sapUiNoContentPadding">
                            <uiT:Table id="mainHeaderTab"
                                class="sapUiTinyMarginBegin sapUiTinyMarginEnd"
                                visibleRowCountMode="Auto"     
                                minAutoRowCount="1"               
                                showColumnVisibilityMenu="true"
                                enableColumnFreeze="true"
                                selectionMode="None"
                                firstVisibleRowChanged="onFirstVisibleRowChanged"
                                cellClick="onCellClick"
                                sort="onSort"
                                filter="onFilter"
                                alternateRowColors="true"
                                columnFreeze="onColumnUpdated"
                                columnMove="onColumnUpdated"
                                columnResize="onColumnUpdated"
                                columnSelect="onColumnUpdated"
                                columnVisibility="onColumnUpdated">
                                <uiT:rowSettingsTemplate>
                                    <uiT:RowSettings highlight="{= ${STATUS} === '50' ? 'Error' : ${STATUS} === '51' ? 'Success' : 'Information'}" />
                                </uiT:rowSettingsTemplate>
                                <uiT:extension>
                                    <OverflowToolbar>
                                        <Text text="{counts>/header} {ddtext>/DLVDOCS}" class="selHdrKeyFontStyle" />
                                        <ToolbarSpacer/>
                                        <!-- <SearchField
                                            id="searchFieldMain"
                                            placeholder="Search"
                                            value=""
                                            search="filterGlobally"
                                            width="15rem"/>
                                        <ToolbarSeparator /> -->
                                        <Button id="btnAdd" 
                                            icon="sap-icon://add"
                                            press="onCreate"
                                            tooltip="{ddtext>/ADD}"
                                            visible="true"/>
                                        <Button id="btnEdit" 
                                            icon="sap-icon://edit"
                                            press="onEdit"
                                            tooltip="{ddtext>/EDIT}"
                                            visible="true"/>
                                        <Button id="btnRefreshHdr" 
                                            icon="sap-icon://refresh"
                                            press="onRefresh"
                                            tooltip="{ddtext>/REFRESH}"
                                            visible="true"/>
                                        <Button id="btnFullScreenHdr" 
                                            icon="sap-icon://full-screen"
                                            press="onTableResize"
                                            tooltip="{ddtext>/FULLSCREEN}"
                                            visible="true" >
                                            <customData>
                                                <core:CustomData key="Max" value="1" />
                                                <core:CustomData key="TableId" value="mainHeaderTab" />
                                                <core:CustomData key="ButtonIdSuffix" value="Hdr" />
                                                <core:CustomData key="Header" value="1" />
                                            </customData>
                                        </Button>
                                        <Button id="btnExitFullScreenHdr" 
                                            icon="sap-icon://exit-full-screen"
                                            press="onTableResize"
                                            tooltip="{ddtext>/EXITFULLSCREEN}"
                                            visible="false" >
                                            <customData>
                                                <core:CustomData key="Max" value="0" />
                                                <core:CustomData key="TableId" value="mainHeaderTab" />
                                                <core:CustomData key="ButtonIdSuffix" value="Hdr" />
                                                <core:CustomData key="Header" value="1" />
                                            </customData>
                                        </Button>
                                        <!-- <Button id="btnTabLayout"
                                            icon="sap-icon://grid" 
                                            tooltip="{ddtext>/SAVELAYOUT}" 
                                            press="onSaveTableLayout"/> -->
                                    </OverflowToolbar>
                                </uiT:extension>
                                <uiT:layoutData>
                                    <FlexItemData growFactor="1" baseSize="0%"/>
                                </uiT:layoutData>                        
                            </uiT:Table> 
                            <layoutData>
                                <uiL:SplitterLayoutData size="50%" id="splitterHdr" />
                            </layoutData> 
                        </Panel>

                        <Panel id="panelDtl" width="100%" height="100%" class="sapUiNoContentPadding">    
                            <uiT:Table id="mainDetailTab"
                                class="sapUiTinyMarginBegin sapUiTinyMarginEnd"
                                visibleRowCountMode="Auto"
                                minAutoRowCount="1"
                                showColumnVisibilityMenu="true"
                                enableColumnFreeze="true"
                                selectionMode="None"
                                firstVisibleRowChanged="onFirstVisibleRowChanged"
                                cellClick="onCellClick"
                                sort="onSort"
                                filter="onFilter"
                                alternateRowColors="true"
                                columnFreeze="onColumnUpdated"
                                columnMove="onColumnUpdated"
                                columnResize="onColumnUpdated"
                                columnSelect="onColumnUpdated"
                                columnVisibility="onColumnUpdated">
                                <uiT:extension>
                                    <OverflowToolbar class="dtlToolbarBorderTop">
                                        <Text text="{ddtext>/DLVNO}: {ui>/activeDlv} ( {counts>/detail} {ddtext>/DLVSCHD} )" class="selHdrKeyFontStyle" />
                                        <ToolbarSpacer/>
                                        <Button id="btnRefreshDtl" 
                                            icon="sap-icon://refresh"
                                            press="onRefresh"
                                            tooltip="{ddtext>/REFRESH}"
                                            visible="true"/>
                                        <Button id="btnFullScreenDtl" 
                                            icon="sap-icon://full-screen"
                                            press="onTableResize"
                                            tooltip="{ddtext>/FULLSCREEN}"
                                            visible="true" >
                                            <customData>
                                                <core:CustomData key="Max" value="1" />
                                                <core:CustomData key="TableId" value="mainDetailTab" />
                                                <core:CustomData key="ButtonIdSuffix" value="Dtl" />
                                                <core:CustomData key="Header" value="0" />
                                            </customData>
                                        </Button>
                                        <Button id="btnExitFullScreenDtl" 
                                            icon="sap-icon://exit-full-screen"
                                            press="onTableResize"
                                            tooltip="{ddtext>/EXITFULLSCREEN}"
                                            visible="false" >
                                            <customData>
                                                <core:CustomData key="Max" value="0" />
                                                <core:CustomData key="TableId" value="mainDetailTab" />
                                                <core:CustomData key="ButtonIdSuffix" value="Dtl" />
                                                <core:CustomData key="Header" value="0" />
                                            </customData>
                                        </Button>
                                    </OverflowToolbar>
                                </uiT:extension>
                                <uiT:layoutData>
                                    <FlexItemData growFactor="1" baseSize="0%"/>
                                </uiT:layoutData> 
                            </uiT:Table> 
                            <layoutData>
                                <uiL:SplitterLayoutData size="50%" id="splitterDtl" />
                            </layoutData> 
                        </Panel>

                        <uiL:layoutData>
                            <FlexItemData growFactor="1" baseSize="0%"/>
                        </uiL:layoutData>
                    </uiL:Splitter>  
            </VBox>
        </content>
    </Page>
</mvc:View>
